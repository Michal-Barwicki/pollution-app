(this["webpackJsonppollution-app"]=this["webpackJsonppollution-app"]||[]).push([[0],{18:function(e,t,n){e.exports=n(42)},23:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(17),o=n.n(r),c=(n(23),n(2)),s=n(3),l=n(5),u=n(4),p=n(6),h=n(7),m=n.n(h),f=(n(41),function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={filteredCountries:[],showOptions:!1,inputValue:""},n.handleChange=function(e){var t=n.props.availableCountries,a=e.currentTarget.value,i=t.filter((function(e){return e.toLowerCase().indexOf(a.toLowerCase())>-1}));n.setState({filteredCountries:i,showOptions:!0,inputValue:a})},n.handleClick=function(e){n.setState({filteredCountries:[],showOptions:!1,inputValue:e.currentTarget.innerText})},n.handleEnterKey=function(e){var t=n.state.filteredCountries;13===e.keyCode&&n.setState({showOptions:!1,inputValue:t[0]})},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){localStorage.getItem("inputValue")&&this.setState({inputValue:localStorage.getItem("inputValue")})}},{key:"componentWillUpdate",value:function(e,t){localStorage.setItem("inputValue",t.inputValue)}},{key:"render",value:function(){var e,t=this,n=this.state,a=n.filteredCountries,r=n.showOptions,o=n.inputValue;return r&&o&&(e=a.length?i.a.createElement("ul",{className:"search-box__ul"},a.map((function(e,n){return i.a.createElement("li",{className:"search-box__options",key:e,onClick:t.handleClick},e)}))):i.a.createElement("div",{className:"search-box__ul"},i.a.createElement("em",null,"Country is not available!"))),i.a.createElement("form",{className:"search-box"},i.a.createElement("input",{type:"text",placeholder:"Country name",className:"search-box__input",onChange:this.handleChange,onKeyDown:this.handleEnterKey,value:o}),i.a.createElement("button",{type:"submit",value:"",className:"search-box__btn",onClick:function(e){return t.props.handleSubmit(e,o)}},i.a.createElement("i",{className:"fas fa-search"})),e)}}]),t}(a.Component)),d=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={cityDescription:"",visibleDescription:!1},n.handleClick=function(){n.toggleVisible(),n.getDescription()},n.toggleVisible=function(){n.setState({visibleDescription:!n.state.visibleDescription})},n.getDescription=function(){m.a.get("https://en.wikipedia.org/w/api.php?format=json&action=query&origin=*&generator=search&gsrnamespace=0&gsrlimit=1&prop=extracts&exintro&explaintext&exsentences=1&exlimit=max&gsrsearch=".concat(n.props.city)).then((function(e){var t=e.data.query.pages,a=t[Object.keys(t)[0]].extract.replace("(listen)","");n.setState({cityDescription:a})})).catch((function(e){return console.log("Something went wrong ".concat(e.message))}))},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(){this.setState({visibleDescription:!1,cityDescription:""})}},{key:"render",value:function(){var e=this.props,t=e.index,n=e.city,a=e.value,r=e.parameter,o=this.state,c=o.cityDescription,s=o.visibleDescription;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"city-item",onClick:this.handleClick},i.a.createElement("div",null,i.a.createElement("span",{className:"city-item__name"},t+1,". ",n,":"),i.a.createElement("span",{className:"city-item__value"},a.toFixed(1)," ",r))),i.a.createElement("div",{className:"city-item__description"},s&&c))}}]),t}(a.Component),g=function(e){var t=function(t,n){if(0!==t.length){var a={},i=[];return t.forEach((function(e){a[e[n]]||(a[e[n]]=!0,i.push(e))})),i}return e.citiesData}(e.citiesData,"city");return t.length=10,t.map((function(e,t){return i.a.createElement(d,Object.assign({},e,{index:t,key:t}))}))},v=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={citiesData:[]},n.availableCountries=["Poland","Germany","Spain","France"],n.changeCountryToCode=function(e){switch(e){case"poland":return"PL";case"germany":return"DE";case"spain":return"ES";case"france":return"FR";default:return!1}},n.handleSubmit=function(e,t){if(e.preventDefault(),n.availableCountries.indexOf(t)>-1){t=t.toLowerCase();var a=n.changeCountryToCode(t),i=(new Date).toISOString().substring(0,10);m.a.get("https://api.openaq.org/v1/measurements?country=".concat(a,"&parameter=pm25&date_from=").concat(i,"&order_by=value&sort=desc&limit=80")).then((function(e){var t=e.data.results;n.setState({citiesData:t})})).catch((function(e){return console.log("Something went wrong ".concat(e.message))}))}},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement(f,{availableCountries:this.availableCountries,handleSubmit:this.handleSubmit}),i.a.createElement(g,{citiesData:this.state.citiesData}))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[18,1,2]]]);
//# sourceMappingURL=main.651f9d9b.chunk.js.map